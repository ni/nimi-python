
parameters:
  module_name: ""
  os_name: ""

jobs:
- job: ${{ parameters.module_name }}_system_tests_${{ parameters.os_name }}
  workspace:
    clean: all
  steps:
    - checkout: self  
      clean: true
      fetchDepth: 10
    - script: |
        cd generated
        mkdir unit
        mkdir kibana
        cd ${{ parameters.module_name }}
        python -m tox -c tox-system_tests.ini --parallel 4 --parallel-live
      displayName: ${{ parameters.module_name }} system tests ${{ parameters.os_name }} 
      env:
        TOX_PARALLEL_NO_SPINNER: 1
